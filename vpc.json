{
    "AWSTemplateFormatVersion": "2010-09-09",
    "Description": "going to create the vpc",
    "Parameters": {
        "vpcCidr": {
            "Type": "String",
            "Default": "10.0.0.0/16",
            "Description": "enter the cidr range here"
        },
        "web1cidr": {
            "Type": "String",
            "Default": "10.0.4.0/24",
            "Description": "enter the subnet cidr range here"
        },
        "web2cidr": {
            "Type": "String",
            "Default": "10.0.3.0/24",
            "Description": "enter the subnet cidr range here"
        },
        "db1cidr": {
            "Type": "String",
            "Default": "10.0.2.0/24",
            "Description": "enter the subnet cidr range here"
        },
        "db2cidr": {
            "Type": "String",
            "Default": "10.0.1.0/24",
            "Description": "enter the subnet cidr range here"
        }
    },
    "Resources": {
        "myvpc": {
            "Type": "AWS::EC2::VPC",
            "Properties": {
                "CidrBlock": {
                    "Ref": "vpcCidr"
                }
            }
        },
        "app1subnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "CidrBlock": {
                    "Ref": "web1cidr"
                },
                "VpcId" : 
                { "Ref": "myvpc" },
                "AvailabilityZone": { "Fn::Select": [0, { "Fn::GetAZs": "" }] },
                
                "Tags":[
                { "Key": "name", "Value":  "app1sub" }
                ]
                
            }
        },
        "app2subnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "CidrBlock": {
                    "Ref": "web2cidr"
                },
                "VpcId" : 
                { "Ref": "myvpc" },
                "AvailabilityZone": { "Fn::Select": [1, { "Fn::GetAZs": "" }] },
                
                "Tags":[
                { "Key": "name", "Value":  "app2sub" }
                ]

                
            }
        },
        "db1subnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "CidrBlock": {
                    "Ref": "db1cidr"
                },
                "VpcId" : 
                { "Ref": "myvpc" },
                "AvailabilityZone": { "Fn::Select": [2, { "Fn::GetAZs": "" }] },
                
                "Tags":[
                { "Key": "name", "Value":  "db1sub" }
                ]

                
            }
        },
        "db2subnet": {
            "Type": "AWS::EC2::Subnet",
            "Properties": {
                "CidrBlock": {
                    "Ref": "db2cidr"
                },
                "VpcId" : 
                { "Ref": "myvpc" },
                "AvailabilityZone": { "Fn::Select": [3, { "Fn::GetAZs": "" }] },
                
                "Tags":[
                { "Key": "name", "Value":  "db2sub" }
                ]

                
            }
        },
        
        
            "rdsDBSubnetGroup": {
                "Type": "AWS::RDS::DBSubnetGroup",
                "Properties": {
                    "DBSubnetGroupDescription": "This subnet group is useful for launching the RDS",
                    "SubnetIds": [
                        {
                          "Ref": "db1subnet"
                        },
                        {
                          "Ref": "db2subnet"
                        }
                      ]
                }
            }
        
     }
}